{{> header_principal}}
<div id="modal"></div>
<section class="c-profile">
    <article class="container mx-auto md:flex justify-between">
        <div class="w-11/12 mx-auto md:w-4/5 px-0 lg:px-20 pb-14">
            <div class=" w-full py-14 mx-auto">
                <div class="w-full">
                    <h2 class="text-2xl font-medium pb-8">Mis Estadisticas</h2>
                    <div class="flex items-center justify-between flex-wrap">
                        <a class="px-4 mt-4 h-10 flex items-center justify-center rounded text-white bg-pink-500 hover:bg-pink-800 duration-300 font-medium"
                            href="">
                            Descargar reporte
                        </a>
                    </div>
                </div>
            </div>
            <div class="grid md:grid-cols-1 gap-4">
                <div class="rounded p-6 border-2 shadow-lg flex justify-center items-center overflow-hidden"
                    id="piechart_3d" style="width: 100%; height: 500px;"></div>
            </div>
        </div>
    </article>
</section>
<script>
    getJSON();

    function getJSON(){
        fetch(`${location.origin}/admin/getStatistics`)
            .then(res => res.json())
            .then(data => graficoPie(data.pie));
    }

    function graficoPie(array) {
        google.charts.load("current", { packages: ["corechart"] });
        google.charts.setOnLoadCallback(drawChart);
        function drawChart() {
            var data = google.visualization.arrayToDataTable(array);

            var options = {
                title: 'Porcentaje de visitas de tiendas',
                is3D: true,
                colors: ['#e00068','#EA5299','#D57CA5']
            };

            var chart = new google.visualization.PieChart(document.getElementById('piechart_3d'));
            chart.draw(data, options);
        }
    }
</script>
{{> footer }}